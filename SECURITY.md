# セキュリティポリシー

## サポートされているバージョン

現在、セキュリティアップデートを受けているバージョン：

| バージョン | サポート状況 |
|-----------|-------------|
| 0.1.x     | :white_check_mark: サポート中 |

## 脆弱性の報告

セキュリティ上の脆弱性を発見した場合は、**公開 Issue を作成しないでください**。

### 報告方法

1. **メールで報告**: security@devbuddy.ai
2. **件名**: `[SECURITY] 脆弱性報告: <概要>`
3. **内容に含めるべき情報**:
   - 脆弱性の説明
   - 再現手順
   - 影響を受けるバージョン
   - 可能であれば修正案

### 報告後の流れ

1. **確認**: 48時間以内に受領確認を送信
2. **調査**: 脆弱性を調査・検証
3. **対応**: 修正パッチの開発
4. **通知**: 報告者への修正完了通知
5. **公開**: セキュリティアドバイザリの公開（必要に応じて）

### 報告者への謝辞

重大な脆弱性を報告いただいた方は、同意を得た上でセキュリティアドバイザリに謝辞を掲載します。

## セキュリティに関する実装

### コードの取り扱い

- ユーザーコードは**メモリ内でのみ処理**
- API コール後はコードを保持しない
- ログにコード内容を含めない

### 通信セキュリティ

- 全ての API 通信は **TLS 1.3** で暗号化
- 認証トークンは環境変数経由でのみ設定

### 認証・認可

- API キーは環境変数 `DEVBUDDY_API_KEY` で管理
- ライセンスキーは暗号化して保存
- セッショントークンは有効期限付き

### Enterprise セキュリティ

- **自己ホストオプション**: コードがネットワーク外に出ない
- **SSO 対応**: SAML / OIDC 対応（Enterprise プラン）
- **監査ログ**: 全操作の記録（Enterprise プラン）
- **RBAC**: 役割ベースのアクセス制御（Team プラン以上）

## セキュリティベストプラクティス

### ユーザー向け

1. **API キーを公開しない**
   - `.env` ファイルを `.gitignore` に追加
   - CI/CD では Secrets を使用

2. **最新バージョンを使用**
   - セキュリティアップデートを定期的に適用

3. **最小権限の原則**
   - 必要な権限のみを付与

### 開発者向け

1. **依存関係の監査**
   ```bash
   pip-audit
   ```

2. **セキュリティスキャン**
   ```bash
   bandit -r src/devbuddy
   ```

3. **秘密情報の検出**
   ```bash
   detect-secrets scan
   ```

## 既知のセキュリティ考慮事項

### API キーの露出リスク

- **対策**: 環境変数経由のみで設定
- **推奨**: CI/CD の Secrets 機能を使用

### コードインジェクション

- **対策**: ユーザー入力のサニタイズ
- **推奨**: 信頼できるリポジトリのみで使用

### サプライチェーン攻撃

- **対策**: 依存関係の定期的な監査
- **推奨**: `pip-audit` の CI 統合

## コンプライアンス

### 対応予定

- [ ] SOC 2 Type II（Enterprise プラン）
- [ ] GDPR 準拠
- [ ] ISO 27001（検討中）

## 連絡先

- **セキュリティチーム**: security@devbuddy.ai
- **一般的な問い合わせ**: support@devbuddy.ai

---

セキュリティは私たちの最優先事項です。ご報告・ご協力に感謝します。
