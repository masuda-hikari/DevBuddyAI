# Railway.app デプロイ設定
# https://railway.app

[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "python -c \"from devbuddy.server.webhook import WebhookServer, WebhookConfig; import os; config = WebhookConfig(stripe_api_key=os.environ.get('STRIPE_API_KEY', ''), stripe_webhook_secret=os.environ.get('STRIPE_WEBHOOK_SECRET', ''), host='0.0.0.0', port=int(os.environ.get('PORT', '8000')), log_level='INFO'); WebhookServer(config).run()\""
healthcheckPath = "/health"
healthcheckTimeout = 10
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Railway環境変数設定:
# STRIPE_API_KEY=sk_xxx
# STRIPE_WEBHOOK_SECRET=whsec_xxx
# PORT は Railway が自動設定
